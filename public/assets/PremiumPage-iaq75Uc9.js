import{aH as Pe,z as J,B as De,F as ze,C as e,D as K,E as Y,aI as D,O as B,K as $,an as q,r as j,$ as ie,a0 as te,a1 as ne,a2 as ae,a3 as le,a4 as oe,ap as V,aq as N,at as ce,au as G,Z as p,J as L,T as t,V as w,a8 as Q,L as h,Q as k,W,_ as pe,aJ as Ae,U as Me,aK as de,X as Ie}from"./index-D-3i0_ZZ.js";import{u as xe}from"./use-toast-TcS82ZOd.js";import{B as y}from"./badge-BEYrR1ZS.js";import{F as U}from"./use-form-control-CBGUu0xk.js";import{F as O,S as me}from"./select-CWzTcnSc.js";import{S as Le}from"./switch-yEUOd6Rk.js";import{C as We}from"./collapse-DifwqhQZ.js";import{P as ue,g as ge,k as je,l as be,s as fe,d as X}from"./Cards-QjY21wj5.js";import{I as Te}from"./ItemsCarousel-DpMpiOD0.js";import{H as P}from"./heading-BF8XlgKi.js";import{C as he}from"./center-frH_QGvs.js";import{S as ye}from"./simple-grid-VxbnG-mh.js";import{D as Re}from"./divider-rD5QcCBx.js";import"./use-checkbox-OAPZjiff.js";import"./unknownMeal-CabVnnUV.js";import"./Star-j31D29az.js";import"./Minus-aZLYyxDR.js";import"./Add-DYZlXOiv.js";import"./modal-footer-hvXhS1BK.js";import"./use-breakpoint-value-DhuFUQbX.js";import"./grid-Cpr5m2qk.js";const[Be,Se]=Pe("Card"),F=J(function(c,s){const{className:d,children:i,direction:a="column",justify:o,align:x,...n}=De(c),m=ze("Card",c);return e.jsx(K.div,{ref:s,className:Y("chakra-card",d),__css:{display:"flex",flexDirection:a,justifyContent:o,alignItems:x,position:"relative",minWidth:0,wordWrap:"break-word",...m.container},...n,children:e.jsx(Be,{value:m,children:i})})}),H=J(function(c,s){const{className:d,...i}=c,a=Se();return e.jsx(K.div,{ref:s,className:Y("chakra-card__body",d),__css:a.body,...i})}),E=J(function(c,s){const{className:d,...i}=c,a=Se();return e.jsx(K.div,{ref:s,className:Y("chakra-card__header",d),__css:a.header,...i})}),_e="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20height='800px'%20width='800px'%20version='1.1'%20id='_x32_'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%20fill='%2328af94'%20stroke='%2328af94'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%2328af94;}%20%3c/style%3e%3cg%3e%3cpath%20class='st0'%20d='M485.22,80.604H26.78C12.013,80.604,0,92.615,0,107.382v297.229c0,14.767,12.013,26.786,26.78,26.786h458.44%20c14.767,0,26.78-12.019,26.78-26.786V107.382C512,92.615,499.987,80.604,485.22,80.604z%20M132.17,283.787v-4.472%20c0-2.298-0.38-4.566-1.359-7.174c-0.188-0.248-18.793-25.357-18.793-48.059c0-27.05,16.988-46.685,40.394-46.685%20s40.394,19.635,40.394,46.685c0,22.702-18.604,47.811-19.022,48.494c-0.751,2.166-1.132,4.433-1.132,6.739v4.472%20c0,6.18,3.628,11.84,9.307,14.449l30.316,12.384c6.584,3.028,11.285,9.084,12.558,16.048l1.431,18.416H78.56l1.407-18.253%20c1.294-7.128,5.998-13.184,12.518-16.18l30.442-12.446C128.542,295.627,132.17,289.967,132.17,283.787z%20M429.318,306.396v29.557%20H266.745v-29.557H429.318z%20M429.318,242.793v29.558H266.745v-29.558H429.318z%20M231.481,208.748v-29.557h197.836v29.557H231.481z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function Fe(r){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(r)}function He(r){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(r)}function Ee(r){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(r)}function Ve(r){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"},child:[]},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"},child:[]}]})(r)}function Ne(r){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(r)}function $e(r){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(r)}function Ge(r){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(r)}function Ue(r){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(r)}const Oe=({isOpen:r,onClose:c})=>{var Z,ee;const{t:s}=B(),{currentLanguage:d}=$(),{user:i,userPlan:a,updateUserProfile:o,planLoading:x}=q(),[n,m]=j.useState(!1),[b,z]=j.useState("active"),[S,f]=j.useState({hours:"12",minutes:"00"}),[C,T]=j.useState(""),R=xe(),_=d==="ar",u=(i==null?void 0:i.subscription)||{},g=l=>typeof l=="string"?l:l.display_name?l.display_name:l.address?l.address:JSON.stringify(l);j.useEffect(()=>{if(i!=null&&i.subscription){if(z(i.subscription.status||"active"),i.subscription.deliveryTime){const[l,v]=i.subscription.deliveryTime.split(":");f({hours:l||"12",minutes:v||"00"})}i.subscription.deliveryAddress?T(typeof i.subscription.deliveryAddress=="string"?i.subscription.deliveryAddress:g(i.subscription.deliveryAddress)):i.defaultAddress&&T(typeof i.defaultAddress=="string"?i.defaultAddress:g(i.defaultAddress))}},[i]);const A=()=>{if(!a||!u.startDate)return null;const l=new Date;new Date(u.startDate);const v=u.consumedMeals||0,I=u.mealsCount||0,se=I-v;if(se<=0)return{type:"completed",message:s("premium.planCompleted")};const re=new Date(l);return re.setDate(l.getDate()+1),{type:"scheduled",date:re.toLocaleDateString(_?"ar-EG":"en-US"),time:`${S.hours}:${S.minutes}`,remainingMeals:se,totalMeals:I}},Ce=async()=>{m(!0);try{const l=b==="active"?"paused":"active";await o(i.uid,{subscription:{...u,status:l,pausedAt:l==="paused"?new Date().toISOString():null,resumedAt:l==="active"&&b==="paused"?new Date().toISOString():u.resumedAt}}),z(l),R({title:s("premium.success"),description:s(l==="paused"?"premium.planPausedSuccessfully":"premium.planResumedSuccessfully"),status:"success",duration:3e3,isClosable:!1})}catch(l){console.error("Error updating plan status:",l),R({title:s("premium.error"),description:s("premium.failedToUpdatePlanStatus"),status:"error",duration:3e3,isClosable:!1})}finally{m(!1)}},ke=async()=>{m(!0);try{const l=`${S.hours}:${S.minutes}`;await o(i.uid,{subscription:{...u,deliveryTime:l,deliveryAddress:C}}),R({title:s("premium.success"),description:s("premium.deliverySettingsUpdated"),status:"success",duration:3e3,isClosable:!1})}catch(l){console.error("Error updating delivery settings:",l),R({title:s("premium.error"),description:s("premium.failedToUpdateDeliverySettings"),status:"error",duration:3e3,isClosable:!1})}finally{m(!1)}},M=A();return(Z=i==null?void 0:i.subscription)!=null&&Z.planId?e.jsxs(ie,{isOpen:r,onClose:c,size:"md",children:[e.jsx(te,{}),e.jsxs(ne,{maxW:"90%",p:4,children:[e.jsx(ae,{children:e.jsxs(p,{children:[e.jsx(L,{as:$e}),e.jsx(t,{children:s("premium.planSettings")})]})}),e.jsx(le,{}),e.jsx(oe,{pb:6,children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsxs(F,{children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(L,{as:Ue,color:"brand.500"}),e.jsx(t,{fontWeight:"bold",children:s("premium.currentPlan")})]})}),e.jsx(H,{children:e.jsxs(w,{align:"stretch",spacing:3,children:[e.jsxs(p,{justify:"space-between",children:[e.jsxs(t,{children:[s("premium.planName"),":"]}),e.jsx(t,{fontWeight:"medium",children:x?e.jsx(Q,{size:"sm"}):_&&(a==null?void 0:a.title_arabic)||(a==null?void 0:a.title)})]}),e.jsxs(p,{justify:"space-between",children:[e.jsxs(t,{children:[s("premium.totalMeals"),":"]}),e.jsx(y,{colorScheme:"blue",children:u.mealsCount||0})]}),e.jsxs(p,{justify:"space-between",children:[e.jsxs(t,{children:[s("premium.consumedMeals"),":"]}),e.jsx(y,{colorScheme:"green",children:u.consumedMeals||0})]}),e.jsxs(p,{justify:"space-between",children:[e.jsxs(t,{children:[s("premium.remainingMeals"),":"]}),e.jsx(y,{colorScheme:"orange",children:(u.mealsCount||0)-(u.consumedMeals||0)})]}),e.jsxs(p,{justify:"space-between",children:[e.jsxs(t,{children:[s("premium.planStatus"),":"]}),e.jsx(y,{colorScheme:b==="active"?"green":"red",children:s(b)})]})]})})]}),e.jsxs(F,{children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(L,{as:b==="active"?Ve:Ne,color:"brand.500"}),e.jsx(t,{fontWeight:"bold",children:s("premium.planControl")})]})}),e.jsxs(H,{children:[e.jsx(U,{children:e.jsxs(p,{justify:"space-between",children:[e.jsxs(w,{align:"start",spacing:1,children:[e.jsx(O,{mb:0,children:s(b==="active"?"premium.pausePlan":"premium.resumePlan")}),e.jsx(t,{fontSize:"sm",color:"gray.500",children:s(b==="active"?"premium.temporarilyStopMealDeliveries":"premium.resumeMealDeliveries")})]}),e.jsx(Le,{isChecked:b==="active",onChange:Ce,isDisabled:n,colorScheme:"brand",size:"lg"})]})}),b==="paused"&&u.pausedAt&&e.jsxs(V,{status:"warning",mt:4,children:[e.jsx(N,{}),e.jsxs(h,{children:[e.jsx(ce,{children:s("premium.planCurrentlyPaused")}),e.jsxs(G,{children:[s("premium.pausedSince"),":"," ",new Date(u.pausedAt).toLocaleDateString()]})]})]})]})]}),e.jsxs(F,{children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(L,{as:Fe,color:"brand.500"}),e.jsx(t,{fontWeight:"bold",children:s("premium.nextScheduledMeal")})]})}),e.jsx(H,{children:M?e.jsx(w,{align:"stretch",spacing:3,children:M.type==="scheduled"?e.jsxs(e.Fragment,{children:[e.jsxs(p,{children:[e.jsx(L,{as:He}),e.jsxs(t,{children:[s("premium.nextDelivery"),":"]}),e.jsxs(t,{fontWeight:"medium",children:[M.date," ",s("premium.at")," ",M.time]})]}),e.jsxs(p,{children:[e.jsxs(t,{children:[s("premium.mealsRemaining"),":"]}),e.jsxs(y,{colorScheme:"blue",children:[M.remainingMeals," / ",M.totalMeals]})]})]}):e.jsxs(V,{status:"info",children:[e.jsx(N,{}),e.jsx(G,{children:M.message})]})}):e.jsx(t,{color:"gray.500",children:s("premium.noScheduledMeals")})})]}),e.jsxs(F,{children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(L,{as:Ge,color:"brand.500"}),e.jsx(t,{fontWeight:"bold",children:s("premium.deliverySettings")})]})}),e.jsx(H,{children:e.jsxs(w,{align:"stretch",spacing:4,children:[e.jsxs(U,{children:[e.jsx(O,{children:s("premium.deliveryAddress")}),e.jsx(me,{value:C,onChange:l=>T(l.target.value),placeholder:s("premium.selectAddress"),children:(ee=i==null?void 0:i.addresses)==null?void 0:ee.map((l,v)=>{const I=g(l);return e.jsx("option",{value:I,children:I},v)})}),(!(i!=null&&i.addresses)||i.addresses.length===0)&&e.jsxs(t,{fontSize:"sm",color:"gray.500",mt:1,children:[s("premium.noAddressesAvailable"),"."," ",s("premium.pleaseAddAddressInProfile")]})]}),e.jsxs(U,{children:[e.jsx(O,{children:s("premium.selectDeliveryTime")}),e.jsx(k,{children:e.jsx(me,{value:`${S.hours}:${S.minutes}`,onChange:l=>{const[v,I]=l.target.value.split(":");f({hours:v,minutes:I})},maxW:"180px",children:["11","12","13","14","15","16","17","18"].flatMap(l=>["00","15","30","45"].map(v=>e.jsx("option",{value:`${l}:${v}`,children:`${l}:${v}`},`${l}-${v}`)))})})]}),(C||u.deliveryTime)&&e.jsx(h,{p:3,bg:"gray.50",borderRadius:"md",children:e.jsxs(p,{children:[e.jsx(L,{as:Ee}),e.jsxs(w,{align:"start",spacing:1,children:[e.jsxs(t,{fontSize:"sm",fontWeight:"medium",children:[s("premium.currentDeliverySettings"),":"]}),C&&e.jsxs(t,{fontSize:"sm",children:[e.jsxs("strong",{children:[s("premium.address"),":"]})," ",C]}),e.jsxs(t,{fontSize:"sm",children:[e.jsxs("strong",{children:[s("premium.time"),":"]})," ",S.hours,":",S.minutes]})]})]})}),e.jsx(W,{onClick:ke,isLoading:n,loadingText:s("premium.updating"),colorScheme:"brand",size:"sm",children:s("premium.updateDeliverySettings")})]})})]}),u.startDate&&u.endDate&&e.jsx(F,{children:e.jsx(H,{children:e.jsxs(w,{align:"stretch",spacing:2,children:[e.jsx(t,{fontWeight:"medium",children:s("premium.planDuration")}),e.jsxs(p,{justify:"space-between",children:[e.jsxs(t,{children:[s("premium.startDate"),":"]}),e.jsx(t,{children:new Date(u.startDate).toLocaleDateString()})]}),e.jsxs(p,{justify:"space-between",children:[e.jsxs(t,{children:[s("premium.endDate"),":"]}),e.jsx(t,{children:new Date(u.endDate).toLocaleDateString()})]})]})})})]})})]})]}):e.jsxs(ie,{isOpen:r,onClose:c,size:"lg",children:[e.jsx(te,{}),e.jsxs(ne,{children:[e.jsx(ae,{children:s("premium.planSettings")}),e.jsx(le,{}),e.jsx(oe,{children:e.jsxs(V,{status:"info",children:[e.jsx(N,{}),e.jsx(ce,{children:s("premium.noActivePlan")}),e.jsx(G,{children:s("premium.pleaseSubscribeToAPlanFirst")})]})})]})]})},Je=({plan:r,loading:c})=>{var z,S;const[s,d]=j.useState(!1),[i,a]=j.useState(!1),{t:o}=B(),{currentLanguage:x}=$(),{user:n}=q(),m=x==="ar";if(c)return e.jsxs(k,{justify:"center",py:6,borderRadius:"35px",bg:"brand.100",alignItems:"center",children:[e.jsx(Q,{size:"md",color:"brand.500"}),e.jsxs(t,{ml:3,children:[o("loadingPlanDetails"),"..."]})]});if(!r)return e.jsxs(t,{children:[o("notSubscribedToAnyPlan"),"."]});const b=r.image||_e;return e.jsxs(h,{borderRadius:"35px",bg:"brand.100",p:6,mb:6,children:[e.jsxs(t,{children:[o("premium.currentlySubscribedToThe")," ",e.jsx("strong",{children:m?r.title_arabic:r.title}),"."]}),e.jsxs(k,{mt:4,alignItems:"center",flexWrap:{base:"wrap",md:"nowrap"},gap:4,children:[e.jsx(h,{w:"85px",h:"85px",mb:{base:2,md:0},alignItems:"center",justifyContent:"center",display:"flex",children:e.jsx("img",{src:b,alt:r.title,style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#FCEA80",padding:"5px"},onError:f=>{f.target.src="/assets/premium/dailyMealPlan.png"}})}),e.jsxs(h,{flex:"1",children:[e.jsx(t,{fontSize:"lg",color:"gray.600"}),e.jsxs(k,{mt:2,gap:2,flexWrap:"wrap",children:[e.jsxs(y,{colorScheme:"green",children:[o("premium.kcal"),": ",r.kcal]}),e.jsxs(y,{colorScheme:"brand",children:[o("premium.carbs"),": ",r.carb,"g"]}),e.jsxs(y,{colorScheme:"red",children:[o("premium.protein"),": ",r.protein,"g"]})]}),r.nextMeal&&e.jsxs(h,{mt:2,children:[e.jsxs(t,{fontSize:"sm",color:"gray.500",children:[e.jsxs("strong",{children:[o("premium.upcomingMeal"),":"]})," ",r.nextMeal.name]}),r.nextMeal.time&&e.jsxs(t,{fontSize:"sm",color:"gray.500",children:[e.jsxs("strong",{children:[o("premium.time"),":"]})," ",r.nextMeal.time]}),((z=n==null?void 0:n.subscription)==null?void 0:z.deliveryAddress)&&e.jsxs(t,{fontSize:"sm",color:"gray.500",children:[e.jsxs("strong",{children:[o("premium.location"),":"]})," ",n.subscription.deliveryAddress]})]})]}),e.jsx(W,{onClick:()=>d(!s),colorScheme:"brand",size:"sm",children:o(s?"premium.hideDetails":"premium.showDetails")})]}),e.jsx(We,{in:s,animateOpacity:!0,children:e.jsxs(h,{mt:4,p:4,w:"80vw",bg:"secondary.100",borderRadius:"md",children:[e.jsx(t,{fontWeight:"medium",mb:2,children:o("premium.planDetails")}),e.jsxs(k,{direction:{base:"column",md:"row"},gap:4,children:[e.jsxs(h,{flex:"1",children:[e.jsxs(t,{fontSize:"sm",children:[e.jsxs("strong",{children:[o("premium.fullName"),":"]})," ",m?r.title_arabic:r.title]}),e.jsxs(t,{fontSize:"sm",children:[e.jsxs("strong",{children:[o("premium.calories"),":"]})," ",r.kcal," kcal"]}),e.jsxs(t,{fontSize:"sm",children:[e.jsxs("strong",{children:[o("premium.carbohydrates"),":"]})," ",r.carb,"g"]}),e.jsxs(t,{fontSize:"sm",children:[e.jsxs("strong",{children:[o("premium.protein"),":"]})," ",r.protein,"g"]})]}),e.jsx(h,{flex:"1",children:(n==null?void 0:n.subscription)&&e.jsxs(t,{fontSize:"sm",children:[(S=n==null?void 0:n.subscription)==null?void 0:S.mealsCount," ",o("premium.days")]})})]}),e.jsx(W,{mt:4,size:"sm",colorScheme:"brand",onClick:()=>a(!0),children:o("premium.managePlanSettings")})]})}),e.jsx(Oe,{isOpen:i,onClose:()=>a(!1)})]})},ve=""+new URL("nonproteinsaladplan-ByNsU8dP.png",import.meta.url).href,Ke=({explorePlans:r,newMember:c})=>{const{plans:s,elementsLoading:d}=pe(),{t:i}=B(),a=n=>n!=null&&n.includes("Gain Weight")?ge:n!=null&&n.includes("Keep Weight")?je:n!=null&&n.includes("Lose Weight")?be:n!=null&&n.includes("Non")?ve:fe,o=(s==null?void 0:s.map(n=>({...n,image:a(n.title)})))||[],x=()=>o.length>0?e.jsx(ue,{plan:o[0]}):e.jsx(t,{children:i("premium.noPlansAvailable")});return d?e.jsx(h,{bg:"white",p:6,borderRadius:"md",children:e.jsx(t,{children:i("premium.loadingPremiumPlans")})}):!s||s.length===0?e.jsxs(h,{bg:"white",p:6,borderRadius:"md",children:[e.jsxs(P,{as:"h2",size:"xl",mb:4,children:[i(c?"premium.join":"premium.change")," ",i("premium.premiumPlans")]}),e.jsx(t,{color:"red.500",children:i("premium.noPremiumPlansFound")})]}):e.jsxs(w,{p:6,borderRadius:"40px",bg:"brand.500",children:[e.jsxs(P,{as:"h2",size:"xl",mb:4,children:[i(c?"premium.join":"premium.change")," ",i("premium.premiumPlans")]}),e.jsxs(k,{justifyContent:"center",mb:4,gap:4,alignItems:"center",flexDirection:{base:"column",md:"row"},children:[e.jsx(h,{children:e.jsx(t,{mb:4,width:{base:"100%",md:"40vw"},textAlign:"center",fontSize:"2xl",color:"gray.600",children:i("premium.unlockExclusiveFeatures")})}),e.jsx(h,{mb:4,w:{base:"100%",md:"40vw"},h:"auto",mx:"auto",position:"relative",children:o.length>1?e.jsx(Te,{items:o,CardComponent:({item:n})=>e.jsx(ue,{plan:n}),visibleCount:1,auto:!0,visibleButtons:!0,carouselBg:"whiteAlpha.50"}):x()})]})]})},we={"Protein Salad Plan":fe,"Non-Protein Salad Plan":ve,"Daily Plan":X,"Gain Weight":ge,"Keep Weight":je,"Lose Weight":be},Ye=({plan:r,isUserPlan:c,onSelect:s})=>{var m;const d=de("secondary.500","gray.700"),i=c?"teal.400":"gray.200",{t:a}=B(),{currentLanguage:o}=$(),x=o==="ar",n={...r,image:we[r.title]||X};return e.jsxs(h,{borderWidth:c?"2px":"none",borderRadius:"lg",borderColor:i,overflow:"hidden",bg:d,p:4,position:"relative",transition:"transform 0.2s 0.2s",_hover:{transform:"translateY(-2px)"},children:[c&&e.jsx(y,{colorScheme:"warning",position:"absolute",top:2,right:2,children:a("premium.currentPlan")}),e.jsx(Ie,{src:n.image,alt:r.title,borderRadius:"md",height:"150px",width:"100%",objectFit:"cover",mb:4,bg:de("gray.50","gray.600")}),e.jsx(P,{as:"h3",size:"md",mb:2,children:x?r.title_arabic:r.title}),e.jsx(t,{mb:2,children:e.jsxs(y,{colorScheme:"error",children:[((m=r.periods)==null?void 0:m.length)||0," ",a("premium.periods")]})}),e.jsxs(k,{justify:"space-between",mt:3,children:[e.jsxs(h,{children:[e.jsxs(t,{fontSize:"sm",children:[a("premium.kcal"),": ",r.kcal]}),e.jsxs(t,{fontSize:"sm",children:[a("premium.carbs"),": ",r.carb,"g"]}),e.jsxs(t,{fontSize:"sm",children:[a("premium.protein"),": ",r.protein,"g"]})]}),e.jsx(W,{size:"sm",colorScheme:c?"error":"brand",onClick:()=>s(n),children:a(c?"premium.viewDetails":"premium.select")})]})]})},qe=({plan:r})=>{const{t:c}=B(),d=$()==="ar";return e.jsxs(h,{children:[e.jsx(P,{as:"h3",size:"sm",mb:2,children:d?r.title_arabic:r.title}),e.jsx(P,{as:"h4",size:"xs",mb:2,children:c("premium.nutritionalInformation")}),e.jsxs(k,{mb:4,gap:4,flexWrap:"wrap",children:[e.jsxs(y,{colorScheme:"green",children:[c("premium.kcal"),": ",r.kcal]}),e.jsxs(y,{colorScheme:"brand",children:[c("premium.carbs"),": ",r.carb,"g"]}),e.jsxs(y,{colorScheme:"red",children:[c("premium.protein"),": ",r.protein,"g"]})]}),e.jsx(P,{as:"h4",size:"xs",mb:2,children:c("checkout.subscriptionPeriod")}),r.periods&&r.periods.length>0?e.jsx(ye,{columns:{base:1,md:2},spacing:2,children:r.periods.map((i,a)=>e.jsx(h,{p:2,bg:"gray.50",borderRadius:"md",children:e.jsxs(t,{children:[i," ",c("premium.daysSubscription")]})},a))}):e.jsx(t,{children:c("premium.noSubscriptionPeriodsAvailable")})]})},bs=()=>{var u;const{plans:r,elementsLoading:c}=pe(),{user:s,userPlan:d,setUserPlan:i,planLoading:a,updateUserSubscription:o}=q(),[x,n]=j.useState(!1),[m,b]=j.useState(null),[z,S]=j.useState(!1),{t:f}=B();xe(),j.useRef(null);const C=j.useRef(null),T=j.useRef(null);j.useEffect(()=>{d&&!m&&b(d)},[d,m]),j.useEffect(()=>{console.log(`from Premium selecting plan event ${JSON.stringify(m)}`),i(m)},[m]);const R=g=>{b(g),setTimeout(()=>{var A;(A=C.current)==null||A.scrollIntoView({behavior:"smooth",block:"end"})},50)},_=()=>{const g=!x;n(g),g&&setTimeout(()=>{var A;(A=T.current)==null||A.scrollIntoView({behavior:"smooth",block:"end"})},50)};return c?e.jsx(he,{h:"100vh",children:e.jsx(w,{spacing:4,children:e.jsx(Q,{size:"xl",color:"brand.500"})})}):e.jsx(h,{p:{base:4,md:8},bg:"gray.50",minH:"100vh",children:e.jsxs(w,{spacing:8,align:"stretch",children:[!s&&e.jsxs(V,{status:"info",borderRadius:"md",children:[e.jsx(N,{}),f("premium.signInToSubscribe")]}),e.jsxs(h,{as:w,bg:"white",p:6,borderRadius:"xl",alignItems:"center",children:[e.jsx(Ke,{}),((u=s==null?void 0:s.subscription)==null?void 0:u.planId)&&e.jsx(Je,{plan:r.filter(g=>g.id===s.subscription.planId)[0],loading:a}),d&&e.jsx(W,{mt:4,colorScheme:"brand",size:"sm",onClick:_,children:f(x?"premium.hideAvailablePlans":"premium.exploreOtherPlans")}),!d&&!a&&e.jsx(W,{mt:4,colorScheme:"brand",onClick:_,children:f("premium.browseAvailablePlans")})]}),x&&e.jsx(Ae,{in:x,children:e.jsxs(h,{bg:"warning.100",p:6,borderRadius:"xl",ref:T,children:[e.jsx(P,{as:"h2",size:"md",mb:6,children:f("premium.availablePremiumPlans")}),r&&r.length>0?e.jsx(ye,{columns:{base:1,md:2,lg:3},spacing:6,children:r.map(g=>e.jsx(Ye,{plan:{...g,image:we[g.title]||X},isUserPlan:d&&s.subscription.planId===g.id,onSelect:R},g.id))}):e.jsx(he,{p:8,children:e.jsx(t,{children:f("premium.noPlansAvailable")})})]})}),m&&x&&e.jsxs(h,{bg:"secondary.200",borderRadius:"xl",p:6,ref:C,children:[e.jsx(P,{as:"h2",size:"md",mb:4,children:f("premium.planDetails")}),e.jsx(qe,{plan:m}),e.jsx(Re,{my:4}),s.subscription.planId!=m.id&&e.jsx(Me,{to:"/premium/join",state:{planId:m.id},style:{textDecoration:"none"},children:e.jsx(W,{mt:4,colorScheme:"brand",size:"lg",width:"full",isLoading:z,loadingText:f("premium.updatingSubscription"),isDisabled:!s||d&&d.id!=m.id,children:f("premium.subscribeToPlan")})})]})]})})};export{bs as PremiumPage,bs as default};
